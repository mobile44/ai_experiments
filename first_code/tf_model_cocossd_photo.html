<html>
    <head><title>Local video playback</title></head>
    <body>
        <video id="localVideo" autoplay playsinline controls="false"></video>
        <script>
            /*const openMediaDevices = async (constraints) => {
                return await navigator.mediaDevices.getUserMedia(constraints);
            }
            try {
                const stream = openMediaDevices({'video':true,'audio':true});
                console.log('Got MediaStream:', stream);
            } catch(error) {
                console.error('Error accessing media devices.', error);
            }*/
            async function getConnectedDevices(type) {
                const devices = await navigator.mediaDevices.enumerateDevices();
                return devices.filter(device => device.kind === type)
            }

            const videoCameras = getConnectedDevices('videoinput');
            console.log('Cameras found:', videoCameras);
            async function playVideoFromCamera() {
                try {
                    const constraints = {'video': true, 'audio': true};
                    const stream = await navigator.mediaDevices.getUserMedia(constraints);
                    const videoElement = document.querySelector('video#localVideo');
                    videoElement.srcObject = stream;
                } catch(error) {
                    console.error('Error opening video camera.', error);
                }
            }
        </script>
    </body>
</html>
